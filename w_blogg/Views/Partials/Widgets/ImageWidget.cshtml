@inherits Umbraco.Web.Mvc.UmbracoViewPage<ContentModels.ImageWidget>
@using ContentModels = Umbraco.Web.PublishedModels;
@using Igloo.Extensions
@{
	var compactClass = Model.Compact ? "block--compact" : "";
	
	var textColorClass = Model.TextColor?.ToString() == "white" ? "light-color" : ""; 
    var backgroundColor = Model.BackgroundColor?.ToString();
    var backgroundColorClass = string.IsNullOrWhiteSpace(backgroundColor) ? "white-bg" : backgroundColor + "-bg";
	
	var containerWidthClass = "container";
    switch (Model.ImageSize)
    {
        case "small":
            containerWidthClass = "container container--small";
            break;
        case "standard":
            containerWidthClass = "container";
            break;
        case "big":
            containerWidthClass = "container container--big";
            break;
        case "full width":
            containerWidthClass = "";
            break;
    }
}

@if (Model.ImageBlock != null)
{
	<div class="block @(compactClass) @(backgroundColorClass) @(textColorClass)">
	
	    <div class="@containerWidthClass">
	        <div class="@(containerWidthClass == "" ? "row row--flat" : "row")">
	        
	            <div class="col-100">
	                
	                <figure class="image-block">
		    
            		   <img class="lazyload"
            		        src="@(Model.ImageBlock.Url)?width=50"
                            data-sizes="auto"
                    	    data-srcset="@(Model.ImageBlock.Url)?upscale=false&width=480 480w,
                    	    @(Model.ImageBlock.Url)?upscale=false&width=768 768w,
                    	    @(Model.ImageBlock.Url)?upscale=false&width=1000 1000w,
                    	    @(Model.ImageBlock.Url)?upscale=false&width=1300 1300w,
                    	    @(Model.ImageBlock.Url)?upscale=false&width=1600 1600w,
                    	    @(Model.ImageBlock.Url)?upscale=false&width=1920 1920w" alt="@Model.ImageCaption" />
                     	
            			@if(Model.ImageCaption != ""){
            				<figcaption>@Model.ImageCaption</figcaption>	
            			}
            		</figure>	
	                
	            </div>
	            
	        </div>
	    </div>
	
	</div>

}